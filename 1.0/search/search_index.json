{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Introduction Feedback Vascular Image Lab (VIL) members: please submit user feedbacks via Google Form . General Pipeline Welcome to the new MOCHA software. MOCHA aims to build a joint analysis pipeline for multi-modal/contrast/sequence (collectively referred to as multi-sequence for simplicity) vascular images, including: Convert raw image data (Dicom files) to a MOCHA project (folder containing NIFTI files) Registration of multi-sequence 3D images Exporting images as iCafe format for centerline tracing using iCafe or AICafe Reading centerline data (swc files) from iCafe, and use it to extract multi-sequence 2D cross-sectional images from the registered images Manual contour labeling on 2D cross-sectional images (similar to 2D CASCADE) Feature measurements and statistical analysis based on annotated labels. Entire workflow of MOCHA. The software will provide a GUI to facilitate the above functionality. Deep learning based models will also be introduced to perform automated segmentation of tissues such as vessel lumen, wall, and different types of plaques/pathology. GUI Development Status Converting raw data to a MOCHA project Registration Exporting as iCafe format Reading iCafe centerlines Generation of 2D cross-sectional images (MPR views) Contour labeling Feature measurements","title":"Introduction"},{"location":"#introduction","text":"Feedback Vascular Image Lab (VIL) members: please submit user feedbacks via Google Form .","title":"Introduction"},{"location":"#general-pipeline","text":"Welcome to the new MOCHA software. MOCHA aims to build a joint analysis pipeline for multi-modal/contrast/sequence (collectively referred to as multi-sequence for simplicity) vascular images, including: Convert raw image data (Dicom files) to a MOCHA project (folder containing NIFTI files) Registration of multi-sequence 3D images Exporting images as iCafe format for centerline tracing using iCafe or AICafe Reading centerline data (swc files) from iCafe, and use it to extract multi-sequence 2D cross-sectional images from the registered images Manual contour labeling on 2D cross-sectional images (similar to 2D CASCADE) Feature measurements and statistical analysis based on annotated labels. Entire workflow of MOCHA. The software will provide a GUI to facilitate the above functionality. Deep learning based models will also be introduced to perform automated segmentation of tissues such as vessel lumen, wall, and different types of plaques/pathology.","title":"General Pipeline"},{"location":"#gui-development-status","text":"Converting raw data to a MOCHA project Registration Exporting as iCafe format Reading iCafe centerlines Generation of 2D cross-sectional images (MPR views) Contour labeling Feature measurements","title":"GUI Development Status"},{"location":"Installation/","text":"Windows 10 or higher The software can be downloaded from MS Sharepoint after logging in with your UW account. If you are a member of the Vascular Imaging Lab, but do not have download permission, please contact Xin Wang. After download you will get a zip file. Unzip it (password is mocha ) and then you can open the software by double-clicking an executable file named mocha.exe in the root folder. MacOS or Linux Please contact Xin Wang for a workable version of the software on these operating systems. A download link will be available on this webpage in the future.","title":"Installation"},{"location":"Installation/#windows-10-or-higher","text":"The software can be downloaded from MS Sharepoint after logging in with your UW account. If you are a member of the Vascular Imaging Lab, but do not have download permission, please contact Xin Wang. After download you will get a zip file. Unzip it (password is mocha ) and then you can open the software by double-clicking an executable file named mocha.exe in the root folder.","title":"Windows 10 or higher"},{"location":"Installation/#macos-or-linux","text":"Please contact Xin Wang for a workable version of the software on these operating systems. A download link will be available on this webpage in the future.","title":"MacOS or Linux"},{"location":"Contour%20Labeling%20Tool/","text":"Introduction Feedback Vascular Image Lab (VIL) members: please submit user feedbacks via Google Form . This tool is for manual contour labeling on 2D cross-sectional images generated from vessel centerlines. It serves as a replacement of related functions in 2D CASCADE. Currently supported features include: Read 2D CASCADE data folder to display multi-modal/contrast/sequence 2D images and existing contours. Show or hide selected contour types. Draw or delete contours; modify contour shapes using key points. Change the names and colors of different contour types. Change intensity windows of different sequences for a better visualization. Save modifed contour information back to the same CASCADE data folder; CASCADE can read and display the modified contours, and thus other functions (such as 3D visualization and feature measurements) of CASCADE still work.","title":"Introduction"},{"location":"Contour%20Labeling%20Tool/#introduction","text":"Feedback Vascular Image Lab (VIL) members: please submit user feedbacks via Google Form . This tool is for manual contour labeling on 2D cross-sectional images generated from vessel centerlines. It serves as a replacement of related functions in 2D CASCADE. Currently supported features include: Read 2D CASCADE data folder to display multi-modal/contrast/sequence 2D images and existing contours. Show or hide selected contour types. Draw or delete contours; modify contour shapes using key points. Change the names and colors of different contour types. Change intensity windows of different sequences for a better visualization. Save modifed contour information back to the same CASCADE data folder; CASCADE can read and display the modified contours, and thus other functions (such as 3D visualization and feature measurements) of CASCADE still work.","title":"Introduction"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/","text":"Read data Currently, the tool only supports reading a 2D CASCADE project folder to display the images and contours. In the future, it will also support reading a MOCHA project. To read a CASCADE folder: In the menubar, click File \u2192 Open Folder In the pop-up window, select a CASCADE project folder, which should contains QVS , QVJ and dcm files. Note that you need to select the folder itself, rather than the QVJ file in the folder. Wait for a while, the tool will read the images and contour information, then display the images. !!! \u201cNew in V1.0.1\u201d The tool started to support multiple project ( QVJ ) files in the same folder. If it detects that, a pop-up window will ask the user to select one QVJ file to read. This is useful especially for some carotid datasets, in which there could be two QVJ files, for the left and right carotid arteries, respectively. After reading the folder, the tool should look like this: Save data You can click save button on the left to save current results back to the same CASCADE folder. The saved data can also be read by CASCADE. An alternative way is to click in the menu bar File \u2192 Save. Warning This tool is under active development and may have some bugs that could destroy the original CASCADE data. So before saving data, it is strongly recommended that you back up all the QVJ and QVS files in the CASCADE folder. The dicom files do not need to be backed up. When saving the data, a message and a progress bar will appear in the status bar at the bottom of the software window to indicate the progress. Once saving is finished, the progress bar will disappear, and the message will show 100%: Then you can safely close the software. Note that if your current results have not been saved yet, you can still directly close the software and there is no pop-up window. So be careful and make sure you have saved what you want before closing the software. Image display Each sequence is displayed in a separate window on the right. Basic information Blue lines In each image window, the four blue lines form a square, which is the common image range for all sequences. Typically, the images have the same size (e.g., \\(200\\times200\\) pixels) and the blue squares indicate the common image boundary. However, if one registers an image by translating one sequence with an offset, the blue square of the image sequence will not be moved; instead, the image itself will move relative to the square, so part of the image may be outside the square. Image information Sequence names are displayed in the upper right corner of each image window. Change viewing range of the images Move images You can drag one of the images with the mouse, so that you can see another part of the image. All the images will move simultaneously. Note that this is not to change the offset for image registration. Zoom in / out The scales of all the images are the same. You can use the scroll wheel to zoom in or out of an image to change its scale. The scales of other images will change accordingly. Rescale You can click Rescale button on the left to quickly rescale all the images to their original scale, i.e., the image window contains exactly the blue square. This is useful if you accidentally zoom in or out too much. View another slice The image windows show different sequences of the same slice, and the index of the slice is shown on the right: The min slice index is 1, and the max index is, for example, 240 in the figure. You can change the number in the text box to change the slice index. Note that you cannot input a number larger than the max index. You can also use the arrow keys Up or Down to increase or decrease the slice index. This is useful if you want to quickly move among multiple adjacent slices to see how the images change. Change intensity windows The intensity windows for all sequences are shown in the table on the left. The Sequence column denotes the sequence names, corresponding to the text displayed in the upper right corner of each image window. The Min and Max columns denotes the min and max values of the intensity window, respectively. Note that these values are not the window level or width, and in fact the relationship is: \\[ \\begin{aligned} \\text{min}=\\text{WindowLevel}-\\frac{\\text{WindowWidth}}{2}\\\\ \\text{max}=\\text{WindowLevel}+\\frac{\\text{WindowWidth}}{2} \\end{aligned} \\] After you change the slice index, the intensity windows will not change. Contour operations The tools for contour operations are in the table on the left. Change colors or contour type names You can click one color block, and change the color of the corresponding contour type in the pop-up window. You can also double-click a table cell in type column to change the corresponding contour type name. Note that you cannot change the name to another name that has been used by another contour type (a pop-up window will show this information if you try to do that). View and modify contours View The checkboxs in show column indicates whether the contours of the corresponding type are visible. You can check or uncheck it to show or hide a certain contour type. If you show a certain contour type (for example, Calcium ), and there exists Calcium contours in the current slice, then you will be able to see the same contour on all the images. You can hover your mouse over a contour, and its type name will show around the mouse cursor. If there happens to be multiple types of contours close to the mouse cursor, their names will be displayed together. Change shape The contour has several key points and a smooth curve generated from the key points using certain algorithms. You can drag the key points to change the shape of the curve. The same contour on other images will change simultaneously. Draw new contours You can click the button in draw column to enable the drawing mode of the corresponding contour type. After that, you can click on one of the images to produce key points. Once the new key points are enough for generating the new contour curve, you can click the same button again to disable the drawing mode. The contour will then be automatically generated if the number of key points is larger than 2; otherwise the key points will vanish and no new contour will be generated. Note that when you enable the drawing mode, the contour type will become visible; when you are in the drawing mode and hide the contour type, the drawing mode will be automatically disabled, and a new contour may be generated based on the key points you have drawn. Delete contour labels You can click one contour to select it. The selected contour will become a little thicker and the color will become white. If there happens to be several contours close to the mouse cursor when you click, they will be selected together. You can press Del to delete the selected contours. Delete contour types You can also delete a contour type from the contour table, and in this way, all the existing contours (no matter whether they are visible) of this type will be deleted. To do so, just click the corresponding row in the table to select the row, then in the menu bar click Contour \u2192 Delete Selected Types , then click yes in the pop-up window. Do NOT delete the default contour types. There are some default contour types defined by 2D CASCADE. They will all appear in the contour table, even if there is no corresponding contour labels on the opened images. To avoid potential confilcts and bugs occured by CASCADE, the following things are not recommended: Delete a default contour type. Add a new contour type with a name similar to the name of a default contour type. Change the color of a default contour type. In the future, these types are likely to become undeleteable. The default types are: 'Lumen', 'Outer Wall', 'Calcification', 'Necrotic/Lipid Core', 'Loose Matrix', 'Type I Hemorrhage', 'Type II Hemorrhage', 'Ulcer', 'Thrombus', 'Other Types', 'Fibrous', 'Fibrous - CA', 'Fibrous - LM', 'Lipid Accumulation', 'Hemorrhage Out Core', 'ECA Lumen': '187', 'ECA Wall', 'Shoulder', 'Muscle', 'Vesselwall Centerline'. Warning The operation of deleting a contour type is not reversible. All information of the contour type will be lost, including the shape and position of each contour and the color and name of the contour type. If you regret after deleting a contour type, then you need to close the software to prevent the results from being saved. Add new types You can add a new contour type. To do so, in the menu bar click Contour \u2192 Add New Type , then a new row will appear in the contour table. The default name of the new contour type is \"tmp*\", you may change the name and the color to make it fit the need. Registration You can click shift button on the left to enable the registration mode. In this mode, dragging one of the images will change the offset of the image, and other images will not move. Change software layout There are splitters in the software window. For example: You can drag them to adjust the size of different subwindows. It is helpful if you want to enlarge the image windows, see more contour types in the table, or do other things. You can even drag a splitter to make some subwindows disappear or appear again.","title":"Basic Usage"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#read-data","text":"Currently, the tool only supports reading a 2D CASCADE project folder to display the images and contours. In the future, it will also support reading a MOCHA project. To read a CASCADE folder: In the menubar, click File \u2192 Open Folder In the pop-up window, select a CASCADE project folder, which should contains QVS , QVJ and dcm files. Note that you need to select the folder itself, rather than the QVJ file in the folder. Wait for a while, the tool will read the images and contour information, then display the images. !!! \u201cNew in V1.0.1\u201d The tool started to support multiple project ( QVJ ) files in the same folder. If it detects that, a pop-up window will ask the user to select one QVJ file to read. This is useful especially for some carotid datasets, in which there could be two QVJ files, for the left and right carotid arteries, respectively. After reading the folder, the tool should look like this:","title":"Read data"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#save-data","text":"You can click save button on the left to save current results back to the same CASCADE folder. The saved data can also be read by CASCADE. An alternative way is to click in the menu bar File \u2192 Save. Warning This tool is under active development and may have some bugs that could destroy the original CASCADE data. So before saving data, it is strongly recommended that you back up all the QVJ and QVS files in the CASCADE folder. The dicom files do not need to be backed up. When saving the data, a message and a progress bar will appear in the status bar at the bottom of the software window to indicate the progress. Once saving is finished, the progress bar will disappear, and the message will show 100%: Then you can safely close the software. Note that if your current results have not been saved yet, you can still directly close the software and there is no pop-up window. So be careful and make sure you have saved what you want before closing the software.","title":"Save data"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#image-display","text":"Each sequence is displayed in a separate window on the right.","title":"Image display"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#basic-information","text":"","title":"Basic information"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#blue-lines","text":"In each image window, the four blue lines form a square, which is the common image range for all sequences. Typically, the images have the same size (e.g., \\(200\\times200\\) pixels) and the blue squares indicate the common image boundary. However, if one registers an image by translating one sequence with an offset, the blue square of the image sequence will not be moved; instead, the image itself will move relative to the square, so part of the image may be outside the square.","title":"Blue lines"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#image-information","text":"Sequence names are displayed in the upper right corner of each image window.","title":"Image information"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#change-viewing-range-of-the-images","text":"","title":"Change viewing range of the images"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#move-images","text":"You can drag one of the images with the mouse, so that you can see another part of the image. All the images will move simultaneously. Note that this is not to change the offset for image registration.","title":"Move images"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#zoom-in-out","text":"The scales of all the images are the same. You can use the scroll wheel to zoom in or out of an image to change its scale. The scales of other images will change accordingly.","title":"Zoom in / out"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#rescale","text":"You can click Rescale button on the left to quickly rescale all the images to their original scale, i.e., the image window contains exactly the blue square. This is useful if you accidentally zoom in or out too much.","title":"Rescale"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#view-another-slice","text":"The image windows show different sequences of the same slice, and the index of the slice is shown on the right: The min slice index is 1, and the max index is, for example, 240 in the figure. You can change the number in the text box to change the slice index. Note that you cannot input a number larger than the max index. You can also use the arrow keys Up or Down to increase or decrease the slice index. This is useful if you want to quickly move among multiple adjacent slices to see how the images change.","title":"View another slice"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#change-intensity-windows","text":"The intensity windows for all sequences are shown in the table on the left. The Sequence column denotes the sequence names, corresponding to the text displayed in the upper right corner of each image window. The Min and Max columns denotes the min and max values of the intensity window, respectively. Note that these values are not the window level or width, and in fact the relationship is: \\[ \\begin{aligned} \\text{min}=\\text{WindowLevel}-\\frac{\\text{WindowWidth}}{2}\\\\ \\text{max}=\\text{WindowLevel}+\\frac{\\text{WindowWidth}}{2} \\end{aligned} \\] After you change the slice index, the intensity windows will not change.","title":"Change intensity windows"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#contour-operations","text":"The tools for contour operations are in the table on the left.","title":"Contour operations"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#change-colors-or-contour-type-names","text":"You can click one color block, and change the color of the corresponding contour type in the pop-up window. You can also double-click a table cell in type column to change the corresponding contour type name. Note that you cannot change the name to another name that has been used by another contour type (a pop-up window will show this information if you try to do that).","title":"Change colors or contour type names"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#view-and-modify-contours","text":"","title":"View and modify contours"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#view","text":"The checkboxs in show column indicates whether the contours of the corresponding type are visible. You can check or uncheck it to show or hide a certain contour type. If you show a certain contour type (for example, Calcium ), and there exists Calcium contours in the current slice, then you will be able to see the same contour on all the images. You can hover your mouse over a contour, and its type name will show around the mouse cursor. If there happens to be multiple types of contours close to the mouse cursor, their names will be displayed together.","title":"View"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#change-shape","text":"The contour has several key points and a smooth curve generated from the key points using certain algorithms. You can drag the key points to change the shape of the curve. The same contour on other images will change simultaneously.","title":"Change shape"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#draw-new-contours","text":"You can click the button in draw column to enable the drawing mode of the corresponding contour type. After that, you can click on one of the images to produce key points. Once the new key points are enough for generating the new contour curve, you can click the same button again to disable the drawing mode. The contour will then be automatically generated if the number of key points is larger than 2; otherwise the key points will vanish and no new contour will be generated. Note that when you enable the drawing mode, the contour type will become visible; when you are in the drawing mode and hide the contour type, the drawing mode will be automatically disabled, and a new contour may be generated based on the key points you have drawn.","title":"Draw new contours"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#delete-contour-labels","text":"You can click one contour to select it. The selected contour will become a little thicker and the color will become white. If there happens to be several contours close to the mouse cursor when you click, they will be selected together. You can press Del to delete the selected contours.","title":"Delete contour labels"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#delete-contour-types","text":"You can also delete a contour type from the contour table, and in this way, all the existing contours (no matter whether they are visible) of this type will be deleted. To do so, just click the corresponding row in the table to select the row, then in the menu bar click Contour \u2192 Delete Selected Types , then click yes in the pop-up window. Do NOT delete the default contour types. There are some default contour types defined by 2D CASCADE. They will all appear in the contour table, even if there is no corresponding contour labels on the opened images. To avoid potential confilcts and bugs occured by CASCADE, the following things are not recommended: Delete a default contour type. Add a new contour type with a name similar to the name of a default contour type. Change the color of a default contour type. In the future, these types are likely to become undeleteable. The default types are: 'Lumen', 'Outer Wall', 'Calcification', 'Necrotic/Lipid Core', 'Loose Matrix', 'Type I Hemorrhage', 'Type II Hemorrhage', 'Ulcer', 'Thrombus', 'Other Types', 'Fibrous', 'Fibrous - CA', 'Fibrous - LM', 'Lipid Accumulation', 'Hemorrhage Out Core', 'ECA Lumen': '187', 'ECA Wall', 'Shoulder', 'Muscle', 'Vesselwall Centerline'. Warning The operation of deleting a contour type is not reversible. All information of the contour type will be lost, including the shape and position of each contour and the color and name of the contour type. If you regret after deleting a contour type, then you need to close the software to prevent the results from being saved.","title":"Delete contour types"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#add-new-types","text":"You can add a new contour type. To do so, in the menu bar click Contour \u2192 Add New Type , then a new row will appear in the contour table. The default name of the new contour type is \"tmp*\", you may change the name and the color to make it fit the need.","title":"Add new types"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#registration","text":"You can click shift button on the left to enable the registration mode. In this mode, dragging one of the images will change the offset of the image, and other images will not move.","title":"Registration"},{"location":"Contour%20Labeling%20Tool/Basic%20Usage/#change-software-layout","text":"There are splitters in the software window. For example: You can drag them to adjust the size of different subwindows. It is helpful if you want to enlarge the image windows, see more contour types in the table, or do other things. You can even drag a splitter to make some subwindows disappear or appear again.","title":"Change software layout"},{"location":"Contour%20Labeling%20Tool/Changelog/","text":"V1.0.1 - October 17, 2022 Bug fixes: When a data folder has already been opened, the user now can open another folder. Previously nothing would happen after the user do this. New features: Support multiple project (QVJ) files in the same folder. A pop-up window will ask the user to select one QVJ to read contours. V1.0.0 - October 13, 2022 Initial release","title":"Changelog"},{"location":"Contour%20Labeling%20Tool/Changelog/#v101-october-17-2022","text":"Bug fixes: When a data folder has already been opened, the user now can open another folder. Previously nothing would happen after the user do this. New features: Support multiple project (QVJ) files in the same folder. A pop-up window will ask the user to select one QVJ to read contours.","title":"V1.0.1 - October 17, 2022"},{"location":"Contour%20Labeling%20Tool/Changelog/#v100-october-13-2022","text":"Initial release","title":"V1.0.0 - October 13, 2022"}]}